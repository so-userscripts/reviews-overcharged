!function r(n,i,a){function o(t,e){if(!i[t]){if(!n[t]){var s="function"==typeof require&&require;if(!e&&s)return s(t,!0);if(c)return c(t,!0);throw(s=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",s}s=i[t]={exports:{}},n[t][0].call(s.exports,function(e){return o(n[t][1][e]||e)},s,s.exports,r,n,i,a)}return i[t].exports}for(var c="function"==typeof require&&require,e=0;e<a.length;e++)o(a[e]);return o}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.selectActions=void 0;r.selectActions=({selectors:e})=>[...document.querySelectorAll(e.title.actions)]},{}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getSuggestionsUserStats=r.getSuggestionsByPost=void 0;const a=e("./config"),c=e("./utils");r.getSuggestionsByPost=async(e,{site:t=a.DEF_SITE,type:r="all"})=>{const o=new URL(`${a.API_BASE}/${a.API_VER}/posts/${e}/suggested-edits`);o.search=new URLSearchParams({site:t}).toString();const s=await fetch(o.toString());if(!s.ok)return[];const{items:n}=await s.json();r={approved:({approval_date:e})=>!!e,rejected:({rejection_date:e})=>!!e,pending:({approval_date:e,rejection_date:t})=>!e&&!t}[r];return r?n.filter(r):n};r.getSuggestionsUserStats=async(e,t,r={})=>{const o=new URL(`${a.API_BASE}/${a.API_VER}/users/${t}/suggested-edits`),s={site:r.site||a.DEF_SITE};Object.keys(r).length&&({from:r,to:i=new Date}=r,r&&(s.from=c.toApiDate(r)),i&&(s.to=c.toApiDate(i))),o.search=new URLSearchParams(s).toString();const n=await fetch(o.toString());if(!n.ok)return[];var{items:i}=await n.json();return i}},{"./config":4,"./utils":17}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.addAuditNotification=void 0;const i=e("./api");r.addAuditNotification=async({selectors:{content:e}},t)=>{var r="audit_notification";if(document.getElementById(r))return!0;var{length:t}=await i.getSuggestionsByPost(t,{type:"pending"});if(t)return!0;const o=document.querySelector(e.typeHint),s=document.querySelector(e.postSummary);if(!o)return!1;const n=document.createElement("blockquote");return n.id=r,n.classList.add("mb12","fs-headline1"),n.textContent="This is an Audit. Tread carefully",o.after(n),o.remove(),null!==s&&void 0!==s&&s.remove(),!0}},{"./api":2}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.config=r.API_VER=r.DEF_SITE=r.API_BASE=void 0;const o=e("./utils");r.API_BASE="https://api.stackexchange.com",r.DEF_SITE="stackoverflow",r.API_VER=2.2,r.config={page:{suggestionId:o.last(location.pathname.split("/"))},classes:{grid:{container:"grid",cell:"grid--cell"},visibility:{none:"v-hidden"}},ids:{progress:{span:"progress-ratio"}},filters:{unsafe:")7tZ5Od"},selectors:{actions:{action:".js-action-radio-parent",disabled:".is-disabled",wrapper:".js-review-actions",sidebar:".js-actions-sidebar",modal:{form:"form[action='/suggested-edits/reject']",votes:{labels:"label[for^=rejection-reason].s-label",counts:".s-badge__votes"}},inputs:{reject:"#review-action-Reject"}},buttons:{submit:".js-review-submit",skip:".js-review-actions:not(.d-none) .js-action-button[value=1]",close:".s-modal--close"},reviews:{done:".js-reviews-done",daily:".js-reviews-per-day"},diffs:{deleted:".full-diff .deleted > div",added:".full-diff .inserted > div"},page:{links:{excerpt:"a.question-hyperlink[href*='/tags']",question:"a[href*='/questions/']",answer:"a.answer-hyperlink"}},content:{typeHint:".js-review-content h2",postSummary:".s-post-summary"},title:{description:".s-page-title--description",actions:".s-page-title--actions a",learnMore:".js-show-modal-from-nav.s-link",title:".s-page-title--text",header:".s-page-title--header"},info:{post:{wrapper:".postcell span"},editor:{card:"a.s-user-card--link"}}}}},{"./utils":17}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.decolorDiff=void 0;r.decolorDiff=e=>{var{added:t,deleted:e}=e.selectors.diffs;const r=document.querySelector(t),o=document.querySelector(e);return!(!r||!o)&&(r.style.backgroundColor="unset",o.style.backgroundColor="unset",!0)}},{}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createItem=r.createGridCell=void 0;const o=e("./config");r.createGridCell=({classes:e})=>{const t=document.createElement("div");return t.classList.add(e.grid.cell),t};r.createItem=(...e)=>{const t=document.createElement("div");return t.classList.add(o.config.classes.grid.cell,"p12"),t.append(...e),t}},{"./config":4}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.waitForSelector=r.goParentUp=r.arraySelect=void 0;r.arraySelect=(e,t)=>[...e.querySelectorAll(t)];r.goParentUp=(e,t=1)=>0!==t&&e?r.goParentUp(e.parentElement,t-1):e;r.waitForSelector=o=>{var e=document.querySelectorAll(o);return e.length?Promise.resolve(e):new Promise(t=>{const r=new MutationObserver(()=>{var e=document.querySelectorAll(o);e.length&&(r.disconnect(),t(e))});r.observe(document,{subtree:!0,childList:!0,attributes:!0})})}},{}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getSuggestionTotals=r.getEditAuthorId=r.getPostId=r.getExcerptName=r.getQuestionId=r.getAnswerId=void 0;const s=e("./config"),n=e("./utils");r.getAnswerId=e=>{e=document.querySelector(e);return n.safeMatch((null==e?void 0:e.href)||"",/\/questions\/\d+\/[\w-]+\/(\d+)/,"")[0]};r.getQuestionId=e=>{e=document.querySelector(e);return n.safeMatch((null==e?void 0:e.href)||"",/\/questions\/(\d+)/,"")[0]};r.getExcerptName=e=>{e=document.querySelector(e);return n.safeMatch((null==e?void 0:e.href)||"",/\/tags\/(.+)\/info/)[0]};r.getPostId=({selectors:{page:{links:e}}})=>r.getAnswerId(e.answer)||r.getQuestionId(e.question);r.getEditAuthorId=()=>{var e=s.config.selectors.info.post.wrapper,t=document.querySelectorAll(e);if(!t.length)return n.handleMatchFailure(e,null);e=Array.from(t).find(({textContent:e})=>/proposed/i.test(e||""));if(!e)return null;t=s.config.selectors.info.editor.card;const{parentElement:r}=e;e=r.querySelector(t);if(!e)return n.handleMatchFailure(t,null);const{href:o}=e;var[,e]=o.match(/users\/(\d+)/)||[];return e||null};r.getSuggestionTotals=e=>{const r={get ratio(){var{approved:e,pending:t,rejected:r,total:o}=this;return{ofApproved:e/o,ofRejected:r/o,ofPending:t/o,approvedToRejected:e/(0===r?1:r)}},get pending(){var{approved:e,rejected:t,total:r}=this;return r-(e+t)},approved:0,rejected:0,total:0};return e.forEach(({approval_date:e,rejection_date:t})=>{r.total+=1,e&&(r.approved+=1),t&&(r.rejected+=1)}),r}},{"./config":4,"./utils":17}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isExcerpt=void 0;const o=e("./getters");r.isExcerpt=e=>!!o.getExcerptName(e.selectors.page.links.excerpt)},{"./getters":8}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const c=e("./audits"),d=e("./config"),l=e("./diffs"),u=e("./getters"),p=e("./guards"),g=e("./progress"),f=e("./stats"),m=e("./title");(async()=>{const t=u.getPostId(d.config);var e=t||p.isExcerpt(d.config);if(t||e){const r=[g.moveProgressToTabs,m.optimizePageTitle,l.decolorDiff,f.addStatsSidebar],o=Object.keys({moveProgressToTabs:g.moveProgressToTabs,optimizePageTitle:m.optimizePageTitle,decolorDiff:l.decolorDiff,addStatsSidebar:f.addStatsSidebar});e||r.push(c.addAuditNotification);e=r.map(e=>e(d.config,t));const s=await Promise.all(e);e=s.reduce((e,t,r)=>`${e}\n${o[r]} - ${t?"ok":"failed"}`,"Status: ");console.debug(e);const{selectors:{actions:{wrapper:n}}}=d.config,i=[Node.TEXT_NODE,Node.COMMENT_NODE],a=new MutationObserver(async e=>{e.find(({addedNodes:e})=>[...e].some(t=>i.every(e=>e!==t.nodeType)&&t.matches(n)))&&await Promise.all([f.addStatsSidebar(d.config),g.moveProgressToTabs(d.config)])});a.observe(document,{subtree:!0,childList:!0})}})()},{"./audits":3,"./config":4,"./diffs":5,"./getters":8,"./guards":9,"./progress":11,"./stats":13,"./title":15}],11:[function(e,t,d){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.moveProgressToTabs=d.hideProgressBar=void 0;const l=e("./actions"),o=e("./domUtils"),u=e("./utils");d.hideProgressBar=({classes:{visibility:e}},t)=>{const r=o.goParentUp(t,3);return!!r&&(r.classList.add(e.none),!0)};d.moveProgressToTabs=e=>{var{ids:{progress:{span:t}},selectors:{reviews:r}}=e;const o=l.selectActions(e);var s=o.find(({href:e})=>/\/review\/suggested-edits/.test(e)),n=document.querySelector(r.daily),i=document.querySelector(r.done);if(!n||!i)return!1;var a=+u.trimNumericString(n.textContent||"0"),r=+u.trimNumericString(i.textContent||"0"),i=r/a,i=u.toPercent(i);if(!s)return!1;const{style:c}=s;c.background=`linear-gradient(90deg, var(--theme-primary-color) ${i}, var(--black-075) ${i})`,c.color="var(--black-600)";s=document.getElementById(t)||(({ids:{progress:e}},t)=>{const r=document.createElement("span");return r.id=e.span,t.append(r),r})(e,s);return r=r,a=a,s.innerHTML=`&nbsp;(${r}/${a})`,d.hideProgressBar(e,n)}},{"./actions":1,"./domUtils":7,"./utils":17}],12:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getRejectionCount=void 0;const d=e("./domUtils"),l=e("./utils");r.getRejectionCount=async e=>{var{selectors:{actions:{modal:t}}}=e,e=await(async e=>{var{selectors:{buttons:t,actions:{inputs:r,modal:o,action:s,disabled:e}}}=e;const n=document.querySelector(r.reject),i=document.querySelector(t.submit);if(!n||!i)return null;await d.waitForSelector(`${s}:not(${e})`),n.click(),i.click();const[a]=[...await d.waitForSelector(o.form)];if(!a)return l.handleMatchFailure(o.form,null);o=a.cloneNode(!0);const c=a.querySelector(t.close);return c.click(),o})(e);if(!e)return l.handleMatchFailure(t.form,null);const r=d.arraySelect(e,t.votes.labels),o={vandalism:0,improvement:0,intent:0,reply:0,harm:0,guidance:0,copyright:0,circular:0},s={102:"improvement",101:"vandalism",104:"intent",105:"reply",106:"copyright",107:"guidance",110:"circular",0:"harm"},n=t.votes.counts;return r.forEach(e=>{const{htmlFor:t}=e;var[,r]=t.match(/(\d+$)/)||[],r=s[r];e.querySelector(n)&&(o[r]+=1)}),o}},{"./domUtils":7,"./utils":17}],13:[function(e,t,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.addStatsSidebar=c.createRejectionCountItem=c.createEditorStatsItem=c.createEditAuthorItem=void 0;const d=e("./api"),p=e("./dom"),g=e("./getters"),l=e("./rejections"),f=e("./templaters"),u=e("./users"),m=e("./utils");c.createEditAuthorItem=({display_name:e,reputation:t,link:r})=>{const o=f.p("Name: ");return o.append(f.a(r,e)),p.createItem(f.ul({header:"Edit Author",items:[o,`Reputation: ${t}`]}))};c.createEditorStatsItem=({link:e},t)=>{const{approved:r,pending:o,rejected:s,total:n,ratio:{approvedToRejected:i,ofApproved:a,ofPending:c,ofRejected:d}}=g.getSuggestionTotals(t),l={header:"Author Stats",items:[]};if(n)return l.items.push(`Approved: ${r} (${m.toPercent(a)})`,`Rejected: ${s} (${m.toPercent(d)})`,`Pending: ${o} (${m.toPercent(c)})`,`Of total: ${n}`,`Ratio: ${i.toFixed(1)}`),p.createItem(f.ul(l));{const u=f.p("Tag wiki/excerpt edits are not returned.");return u.append(f.br(),f.text("See their "),f.a(`${e}?tab=activity&sort=suggestions`,"activity tab")),l.items.push(u),p.createItem(f.ul(l))}};c.createRejectionCountItem=e=>{const t=Object.entries(e).filter(([,e])=>!!e),r=t.map(([e,t])=>`${m.scase(e)}: ${t}`);return r.length||r.push("No reject votes"),p.createItem(f.ul({items:r,header:"Reject votes"}))};c.addStatsSidebar=async e=>{const t=document.querySelector(e.selectors.actions.sidebar);if(!t)return!1;const r=document.createElement("div");r.classList.add("s-sidebarwidget","ml24","mt24");const o=document.createElement("div");o.classList.add("s-sidebarwidget--header"),o.textContent="Extra Info";const s=document.createElement("div");s.classList.add(e.classes.grid.container,"fd-column");var n=g.getEditAuthorId(),i=await l.getRejectionCount(e);if(!i)return!1;const a=[];return n&&([e,n]=await Promise.all([u.getUserInfo(e,n),d.getSuggestionsUserStats(e,n)]),e&&a.push(c.createEditAuthorItem(e),c.createEditorStatsItem(e,n))),a.push(c.createRejectionCountItem(i)),s.append(...a),r.append(o,s),t.append(r),!0}},{"./api":2,"./dom":6,"./getters":8,"./rejections":12,"./templaters":14,"./users":16,"./utils":17}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ul=n.text=n.p=n.li=n.br=n.a=void 0;n.a=(e,t=e)=>{const r=document.createElement("a");return r.href=e,r.textContent=t,r.target="_blank",r.referrerPolicy="no-referrer",r};n.br=()=>document.createElement("br");n.li=e=>{const t=document.createElement("li");return"string"==typeof e?t.textContent=e:t.append(e),t};n.p=e=>{const t=document.createElement("p");return t.style.marginBottom="0",t.innerText=e,t};n.text=e=>document.createTextNode(e);n.ul=({header:e,items:t})=>{const r=document.createElement("ul"),{style:o}=r;if(o.listStyle="none",o.margin="0",e){const s=document.createElement("h3");s.classList.add("mb8"),s.textContent=e,r.append(s)}t=t.map(n.li);return r.append(...t),r}},{}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.optimizePageTitle=n.removeTitleLines=void 0;const i=e("./dom"),a=e("./utils");n.removeTitleLines=(e,t)=>(t||document).querySelectorAll(e.selectors.title.description).forEach(e=>e.remove());n.optimizePageTitle=e=>{var t=e.selectors.title.title;const r=document.querySelector(t);if(!r)return a.handleMatchFailure(t,!1);r.classList.add(e.classes.grid.container);t=document.querySelector(e.selectors.title.header);const o=i.createGridCell(e);o.classList.add("ml12"),t&&o.append(t);t=r.querySelector(e.selectors.title.learnMore);const s=o.cloneNode();return t&&s.append(t),n.removeTitleLines(e,r),r.append(o,s),!0}},{"./dom":6,"./utils":17}],16:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getUserInfo=void 0;const n=e("./config");r.getUserInfo=async({filters:{unsafe:e}},t,r=n.DEF_SITE)=>{const o=new URL(`${n.API_BASE}/${n.API_VER}/users/${t}`);o.search=new URLSearchParams({site:r,filter:e}).toString();const s=await fetch(o.toString());if(!s.ok)return null;var{items:[e]}=await s.json();return e}},{"./config":4}],17:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.trimNumericString=r.toPercent=r.toApiDate=r.scase=r.safeMatch=r.last=r.handleMatchFailure=void 0;r.handleMatchFailure=(e,t)=>(console.debug(`Couldn't find the element with selector: ${e}`),t);r.last=e=>e[e.length-1];r.safeMatch=(e,t,r="")=>(e.match(t)||[e,r]).slice(1);r.scase=e=>e[0].toUpperCase()+e.slice(1).toLowerCase();r.toApiDate=e=>(e.valueOf()/1e3).toString();r.toPercent=e=>`${Math.trunc(100*e)}%`;r.trimNumericString=e=>e.replace(/\D/g,"")},{}]},{},[10]);