!function n(o,s,a){function i(t,e){if(!s[t]){if(!o[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(c)return c(t,!0);throw(r=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",r}r=s[t]={exports:{}},o[t][0].call(r.exports,function(e){return i(o[t][1][e]||e)},r,r.exports,n,o,s,a)}return s[t].exports}for(var c="function"==typeof require&&require,e=0;e<a.length;e++)i(a[e]);return i}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.config=r.API_VER=r.DEF_SITE=r.API_BASE=void 0;const n=e("./utils");r.API_BASE="https://api.stackexchange.com",r.DEF_SITE="stackoverflow",r.API_VER=2.2,r.config={page:{suggestionId:n.last(location.pathname.split("/"))},classes:{grid:{container:"grid",cell:"grid--cell"}},selectors:{actions:{sidebar:".js-actions-sidebar",modal:{form:"form[action='/suggested-edits/reject']",votes:{labels:"label[for^=rejection-reason].s-label",counts:".s-badge__votes"}},inputs:{reject:"#review-action-Reject"}},buttons:{submit:".js-review-submit",skip:".js-review-actions:not(.d-none) .js-action-button[value=1]",close:".s-modal--close"},reviews:{done:".js-reviews-done",daily:".js-reviews-per-day"},diffs:{deleted:".full-diff .deleted > div",added:".full-diff .inserted > div"},page:{links:{question:"a[href*='/questions/']",answer:"a.answer-hyperlink"}},content:{typeHint:".js-review-content h2",postSummary:".s-post-summary"},title:{description:".s-page-title--description",actions:".s-page-title--actions a",learnMore:".js-show-modal-from-nav.s-link",title:".s-page-title--text",header:".s-page-title--header"},info:{post:{wrapper:".postcell span"},editor:{card:"a.s-user-card--link"}}}}},{"./utils":7}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.goParentUp=r.arraySelect=void 0;r.arraySelect=(e,t)=>Array.from(e.querySelectorAll(t));r.goParentUp=(e,t=1)=>0!==t&&e?r.goParentUp(e.parentElement,t-1):e},{}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getEditAuthorId=r.getPostId=r.getQuestionId=r.getAnswerId=void 0;const o=e("./config"),s=e("./utils");r.getAnswerId=e=>{e=document.querySelector(e);return s.safeMatch((null==e?void 0:e.href)||"",/\/questions\/\d+\/[\w-]+\/(\d+)/,"")[0]};r.getQuestionId=e=>{e=document.querySelector(e);return s.safeMatch((null==e?void 0:e.href)||"",/\/questions\/(\d+)/,"")[0]};r.getPostId=({selectors:{page:{links:e}}})=>r.getAnswerId(e.answer)||r.getQuestionId(e.question);r.getEditAuthorId=()=>{var e=o.config.selectors.info.post.wrapper,t=document.querySelectorAll(e);if(!t.length)return s.handleMatchFailure(e,null);e=Array.from(t).find(({textContent:e})=>/proposed/i.test(e||""));if(!e)return null;t=o.config.selectors.info.editor.card;const{parentElement:r}=e;e=r.querySelector(t);if(!e)return s.handleMatchFailure(t,null);const{href:n}=e;var[,e]=n.match(/users\/(\d+)/)||[];return e||null}},{"./config":1,"./utils":7}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const d=e("./config"),i=e("./domUtils"),u=e("./getters"),p=e("./templaters"),m=e("./users"),f=e("./utils");(async()=>{const l=(...e)=>{const t=document.createElement("div");return t.classList.add(d.config.classes.grid.cell,"p12"),t.append(...e),t};const c=e=>{var{selectors:{actions:{modal:t}}}=e,e=(e=>{var{selectors:{buttons:t,actions:{inputs:r,modal:e}}}=e;const n=document.querySelector(r.reject),o=document.querySelector(t.submit);if(!n||!o)return null;n.click(),o.click();const s=document.querySelector(e.form);if(!s)return null;e=s.cloneNode(!0);const a=s.querySelector(t.close);return a.click(),e})(e);if(!e)return f.handleMatchFailure(t.form,null);const r=i.arraySelect(e,t.votes.labels),n={spam:0,improvement:0,intent:0,reply:0,harm:0},o={102:"improvement",101:"spam",104:"intent",105:"reply",0:"harm"},s=t.votes.counts;return r.forEach(e=>{const{htmlFor:t}=e;var[,r]=t.match(/(\d+$)/)||[],r=o[r];e.querySelector(s)&&(n[r]+=1)}),n};const r=u.getPostId(d.config);if(r){var e=Object.entries({moveProgressToTabs:({selectors:e})=>{const t=Array.from(document.querySelectorAll(d.config.selectors.title.actions)),r=t.find(({href:e})=>/\/review\/suggested-edits/.test(e));var n=document.querySelector(e.reviews.daily),o=document.querySelector(e.reviews.done);if(!n||!o)return!1;var s=f.trimNumericString(n.textContent||"0"),e=f.trimNumericString(o.textContent||"0"),o=+e/+s,o=f.toPercent(o);if(!r)return!1;const{style:a}=r;return a.background=`linear-gradient(90deg, var(--theme-primary-color) ${o}, var(--black-075) ${o})`,a.color="var(--black-600)",r.textContent+=` (${e}/${s})`,(e=>{const t=i.goParentUp(e,3);return!!t&&(t.remove(),!0)})(n)},optimizePageTitle:e=>{var t=e.selectors.title.title;const r=document.querySelector(t);if(!r)return f.handleMatchFailure(t,!1);r.classList.add(e.classes.grid.container);t=document.querySelector(e.selectors.title.header);const n=(()=>{const e=document.createElement("div");return e.classList.add(d.config.classes.grid.cell),e})();n.classList.add("ml12"),t&&n.append(t);t=r.querySelector(e.selectors.title.learnMore);const o=n.cloneNode();return t&&o.append(t),e=e,(r||document).querySelectorAll(e.selectors.title.description).forEach(e=>e.remove()),r.append(n,o),!0},decolorDiff:e=>{var{added:t,deleted:e}=e.selectors.diffs;const r=document.querySelector(t),n=document.querySelector(e);return!(!r||!n)&&(r.style.backgroundColor="unset",n.style.backgroundColor="unset",!0)},addAuditNotification:async({selectors:{content:e}},t)=>{var r="audit_notification";if(document.getElementById(r))return!0;var{length:t}=await(async(e,{site:t=d.DEF_SITE,type:r="all"})=>{const n=new URL(`${d.API_BASE}/${d.API_VER}/posts/${e}/suggested-edits`);n.search=new URLSearchParams({site:t}).toString();const o=await fetch(n.toString());if(!o.ok)return[];const{items:s}=await o.json();r={approved:({approval_date:e})=>!!e,rejected:({rejection_date:e})=>!!e,pending:({approval_date:e,rejection_date:t})=>!e&&!t}[r];return r?s.filter(r):s})(t,{type:"pending"});if(t)return!0;const n=document.querySelector(e.typeHint),o=document.querySelector(e.postSummary);if(!n)return!1;const s=document.createElement("blockquote");return s.id=r,s.classList.add("mb12","fs-headline1"),s.textContent="This is an Audit. Tread carefully",n.after(s),n.remove(),null!==o&&void 0!==o&&o.remove(),!0}}).map(([e,t])=>[e,t(d.config,r)]);const t=await Promise.all(e);e=t.reduce((e,[t,r])=>`${e}\n${t} - ${r?"ok":"failed"}`,"Status: ");console.debug(e),await(async e=>{const t=document.querySelector(e.selectors.actions.sidebar);if(!t)return!1;const r=document.createElement("div");r.classList.add("s-sidebarwidget","ml24","mt24");const n=document.createElement("div");n.classList.add("s-sidebarwidget--header"),n.textContent="Extra Info";const o=document.createElement("div");o.classList.add(e.classes.grid.container,"fd-column");var s=u.getEditAuthorId();if(!s)return!1;var[a,s]=await Promise.all([m.getUserInfo(s),(async(e,t={})=>{const r=new URL(`${d.API_BASE}/${d.API_VER}/users/${e}/suggested-edits`),n={site:t.site||d.DEF_SITE};Object.keys(t).length&&({from:t,to:s=new Date}=t,t&&(n.from=f.toApiDate(t)),s&&(n.to=f.toApiDate(s))),r.search=new URLSearchParams(n).toString();const o=await fetch(r.toString());if(!o.ok)return[];var{items:s}=await o.json();return s})(s)]),e=c(e);if(!a||!e)return!1;const i=[];return i.push((({display_name:e,reputation:t,link:r})=>{const n=p.p("Name: ");return n.append(p.a(r,e)),l(p.ul({header:"Edit Author",items:[n,`Reputation: ${t}`]}))})(a),(({link:e},t)=>{var{approved:r,rejected:n,total:o,ratio:{approvedToRejected:s,ofApproved:a,ofRejected:t}}=(e=>{const r={get ratio(){var{approved:e,rejected:t,total:r}=this;return{ofApproved:e/r,ofRejected:t/r,approvedToRejected:e/(0===t?1:t)}},approved:0,rejected:0,total:0};return e.forEach(({approval_date:e,rejection_date:t})=>{r.total+=1,e&&(r.approved+=1),t&&(r.rejected+=1)}),r})(t);const i={header:"Author Stats",items:[]};if(o)return i.items.push(`Approved: ${r} (${f.toPercent(a)})`,`Rejected: ${n} (${f.toPercent(t)})`,`Of total: ${o}`,`Ratio: ${s}`),l(p.ul(i));{const c=p.p("Tag wiki/excerpt edits are not returned.");return c.append(p.br(),p.text("See their "),p.a(`${e}?tab=activity`,"activity tab")),i.items.push(c),l(p.ul(i))}})(a,s),(e=>{const t=Object.entries(e).filter(([,e])=>!!e);e=t.map(([e,t])=>`${f.scase(e)}: ${t}`);return l(p.ul({items:e,header:"Reject votes"}))})(e)),o.append(...i),r.append(n,o),a&&t.append(r),!0})(d.config)}})()},{"./config":1,"./domUtils":2,"./getters":3,"./templaters":5,"./users":6,"./utils":7}],5:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.ul=s.text=s.p=s.li=s.br=s.a=void 0;s.a=(e,t=e)=>{const r=document.createElement("a");return r.href=e,r.textContent=t,r.target="_blank",r.referrerPolicy="no-referrer",r};s.br=()=>document.createElement("br");s.li=e=>{const t=document.createElement("li");return"string"==typeof e?t.textContent=e:t.append(e),t};s.p=e=>{const t=document.createElement("p");return t.style.marginBottom="0",t.innerText=e,t};s.text=e=>document.createTextNode(e);s.ul=({header:e,items:t})=>{const r=document.createElement("ul"),{style:n}=r;if(n.listStyle="none",n.margin="0",e){const o=document.createElement("h3");o.classList.add("mb8"),o.textContent=e,r.append(o)}t=t.map(s.li);return r.append(...t),r}},{}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getUserInfo=void 0;const o=e("./config");r.getUserInfo=async(e,t=o.DEF_SITE)=>{const r=new URL(`${o.API_BASE}/${o.API_VER}/users/${e}`);r.search=new URLSearchParams({site:t}).toString();const n=await fetch(r.toString());if(!n.ok)return null;var{items:[t]}=await n.json();return t}},{"./config":1}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.trimNumericString=r.toPercent=r.toApiDate=r.scase=r.safeMatch=r.last=r.handleMatchFailure=void 0;r.handleMatchFailure=(e,t)=>(console.debug(`Couldn't find the element with selector: ${e}`),t);r.last=e=>e[e.length-1];r.safeMatch=(e,t,r="")=>(e.match(t)||[e,r]).slice(1);r.scase=e=>e[0].toUpperCase()+e.slice(1).toLowerCase();r.toApiDate=e=>(e.valueOf()/1e3).toString();r.toPercent=e=>`${Math.trunc(100*e)}%`;r.trimNumericString=e=>e.replace(/\D/g,"")},{}]},{},[4]);